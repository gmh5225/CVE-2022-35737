/*
 * $ gcc snprintf-good-example.c -I/usr/include/ -L/usr/lib/x86_64-linux-gnu/ -l:libsqlite3.so
 */

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <sqlite3.h>

int main(int argc, char *argv[]) {

    char src[] = "hello, \'world\'!";
    char dst[sizeof(src) + 5];  // Add 5 to account for extra quotes and terminating NULL byte.

    sqlite3_snprintf(sizeof(dst), dst, "'%q'", src);

    printf("src: %s\n", src);
    printf("dst: %s\n", dst);
    return 0;
}

